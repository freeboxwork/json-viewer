<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV to JSON Converter Online - Free CSV to JSON Tool</title>
    <meta name="description" content="Convert CSV data to JSON format online for free. Upload CSV files, preview as table, and get clean JSON output.">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
    <script src="app.js"></script>
    <script>document.write(getNavHTML('csv-to-json'));</script>

    <main>
        <div class="page-header">
            <h1>CSV to JSON Converter</h1>
            <p>Convert CSV data to JSON array format with table preview</p>
        </div>

        <div class="toolbar">
            <button class="btn btn-primary" onclick="convertToJSON()">&#128260; Convert to JSON</button>
            <div class="toolbar-separator"></div>
            <label style="display:flex;align-items:center;gap:6px;cursor:pointer;"><input type="checkbox" id="hasHeader" checked style="accent-color:var(--accent);"><span style="font-size:0.82rem;color:var(--text-secondary);">First Row is Header</span></label>
            <div class="option-group"><label>Indent:</label><select class="select" id="indentSelect"><option value="2" selected>2 Spaces</option><option value="4">4 Spaces</option></select></div>
            <div class="toolbar-separator"></div>
            <button class="btn btn-secondary btn-sm" onclick="triggerUpload('csvInput', convertToJSON)">&#128194; Upload</button>
            <button class="btn btn-secondary btn-sm" onclick="loadSample()">Sample</button>
            <button class="btn btn-secondary btn-sm" onclick="copyJSON()">&#128203; Copy</button>
            <button class="btn btn-secondary btn-sm" onclick="downloadJSON()">&#11015; Download</button>
            <button class="btn btn-danger btn-sm" onclick="clearAll()">&#128465; Clear</button>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="input" onclick="switchTab('input')">CSV Input</button>
            <button class="tab" data-tab="output" onclick="switchTab('output')">JSON Output</button>
        </div>

        <div class="tab-body">
            <div class="tab-panel active" id="panel-input">
                <textarea class="editor-area" id="csvInput" placeholder="Paste CSV data here..." spellcheck="false"></textarea>
            </div>
            <div class="tab-panel" id="panel-output">
                <div class="output-area" id="jsonOutput"><div style="color:var(--text-muted);text-align:center;padding-top:140px;"><div style="font-size:3rem;margin-bottom:12px;">[ ]</div><p>JSON output will appear here</p></div></div>
            </div>
        </div>

        <div class="status-bar"><div class="status-item"><div class="status-dot neutral" id="statusDot"></div><span id="statusText">Ready</span></div></div>
    </main>

    <script>document.write(getFooterHTML());</script>

    <script>
        let jsonResult = '';
        setupTextareaDrop('csvInput', convertToJSON);

        function convertToJSON() {
            const text = document.getElementById('csvInput').value.trim();
            if (!text) { setStatus('Please enter CSV', 'invalid'); return; }
            const parsed = Papa.parse(text, { header: document.getElementById('hasHeader').checked, skipEmptyLines: true, dynamicTyping: true });
            const data = parsed.data;
            jsonResult = JSON.stringify(data, null, parseInt(document.getElementById('indentSelect').value));
            document.getElementById('jsonOutput').innerHTML = `<div class="code-view">${syntaxHighlight(jsonResult)}</div>`;
            setStatus(`Converted ${data.length} rows to JSON`, 'valid');
            switchTab('output');
        }

        function loadSample() {
            document.getElementById('csvInput').value = `name,age,city,email,active\nAlice,28,Seoul,alice@example.com,true\nBob,35,Busan,bob@example.com,false\nCharlie,22,Incheon,charlie@example.com,true`;
            convertToJSON();
        }

        function copyJSON() { if (!jsonResult) { showToast('Nothing to copy', 'error'); return; } copyToClipboard(jsonResult); }
        function downloadJSON() { if (!jsonResult) { showToast('Nothing to download', 'error'); return; } downloadFile(jsonResult, 'data.json'); }
        function clearAll() { document.getElementById('csvInput').value = ''; document.getElementById('jsonOutput').innerHTML = `<div style="color:var(--text-muted);text-align:center;padding-top:140px;"><div style="font-size:3rem;margin-bottom:12px;">[ ]</div><p>JSON output will appear here</p></div>`; jsonResult = ''; setStatus('Ready', 'neutral'); switchTab('input'); }
        function setStatus(t, type) { document.getElementById('statusText').textContent = t; document.getElementById('statusDot').className = 'status-dot ' + type; }
    </script>
</body>
</html>
